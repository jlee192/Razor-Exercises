@{
    // this will be based on ProductEdit.cshtml

    Layout = "~/_Layout.cshtml";
    Page.Title = string.Format("Razor - {0}", "Exercise 04_C");

    var pid = Request.QueryString["pid"];
    if (pid.IsEmpty())
    {
        Response.Redirect("Exercise04_B.cshtml");
    }
    var albumid = Request.Form["AlbumId"];
    var title = Request.Form["Title"];
    var artistid = Request.Form["ArtistList"];
    var releaseyear = Request.Form["ReleaseYear"];
    var releaselabel = Request.Form["ReleaseLabel"];

    // validator controls which execute on the server side
    Validation.Add("Title",
        Validator.Required("Album title is required"),
        Validator.StringLength(160, 1, "Album title is limited to 160 characters"));

    Validation.Add("ArtistList",
        Validator.Required("Artist must be selected"));

    Validation.Add("ReleaseYear",
        Validator.Required("Release year is required"),
        Validator.Integer("Release year must be a number"),
        Validator.Range(1950, DateTime.Now.Year, "Year is out of range, 1950 to today"));

    Validation.Add("ReleaseLabel",
        Validator.StringLength(50, 0, "Label is limited to 50 characters."));
    var db = Database.Open("CHINOOK");

}

@section banner {
    <h1>@Page.Title</h1>
}

